<!-- Main wrapper -->
<div class="dashboard-root">
  <!-- Left Sidebar (kept minimal; likely your app already has one) -->
  <aside class="sidebar">
    <div class="brand">
      <div class="logo">üõ†Ô∏è</div>
      <div class="brand-title">ConstructCo</div>
    </div>

    <nav class="menu">
      <a class="menu-item active">Dashboard</a>
      <a class="menu-item">Jobs</a>
      <a class="menu-item">Wallet</a>
      <a class="menu-item">Profile</a>
      <a class="menu-item">Settings</a>
    </nav>

   <!-- where profile mini exists -->
<div class="profile-info">
  <div class="name">{{ profileName || 'Technician' }}</div>
  <div class="role">Technician</div>
  <div *ngIf="experienceYears" class="small muted">Experience: {{ experienceYears }} yrs</div>
</div>

  </aside>

  <!-- Main content -->
  <main class="main-area">
    <header class="topbar">
      <div>
        <h1 class="welcome">Welcome, <span class="name">{{ profileName || 'Technician' }}</span>!</h1>
        <p class="subtitle">Here‚Äôs your performance overview for today.</p>
      </div>
      <div class="new-job-btn">+ New Job</div>
    </header>

    <section class="stats-row">
      <div class="stat-card">
        <div class="label">Earnings (This Month)</div>
        <div class="value">\${{ stats.totalRevenue | number:'1.0-0' }}</div>
        <div class="delta" [class.up]="stats.revenueChangePercent>=0" [class.down]="stats.revenueChangePercent<0">
          {{ stats.revenueChangePercent >= 0 ? '+' : ''}}{{ stats.revenueChangePercent | number:'1.0-0' }}%
        </div>
      </div>

      <div class="stat-card">
        <div class="label">Jobs Completed</div>
        <div class="value">{{ stats.jobsCompleted }}</div>
        <div class="delta" [class.up]="stats.jobsChangePercent>=0" [class.down]="stats.jobsChangePercent<0">
          {{ stats.jobsChangePercent >= 0 ? '+' : ''}}{{ stats.jobsChangePercent | number:'1.0-0' }}%
        </div>
      </div>

      <div class="stat-card">
        <div class="label">Current Rating</div>
        <div class="value">{{ stats.currentRating }}/5</div>
        <div class="delta" [class.down]="stats.currentRating < 4.5">
          {{ (stats.currentRating >= 4.5) ? '' : '-0.1' }}
        </div>
      </div>

      <div class="stat-card">
        <div class="label">Wallet Balance</div>
        <div class="value">\${{ stats.wallet | number:'1.0-2' }}</div>
        <div class="delta up">+{{ stats.revenueChangePercent | number:'1.0-0' }}%</div>
      </div>
    </section>

    <section class="content-row">
      <div class="left-col">
        <h3 class="section-title">New Job Requests</h3>
        <div class="requests-card">
          <div *ngIf="loading.jobs" class="loading">Loading requests‚Ä¶</div>
          <div *ngIf="!loading.jobs && newJobs.length === 0" class="empty">No new requests</div>

          <div *ngFor="let j of newJobs" class="request-row">
            <div class="request-left">
              <div class="job-title">{{ j.title }}</div>
              <div class="job-sub">{{ j.rateText }}</div>
              <div class="job-sub muted">{{ j.address }}</div>
            </div>
            <div class="request-actions">
              <button class="btn btn-decline" (click)="onDecline(j.bookingId)">Decline</button>
              <button class="btn btn-accept" (click)="onAccept(j.bookingId)">Accept</button>
            </div>
          </div>
        </div>
      </div>

      <aside class="right-col">
        <div class="card current-job">
          <h4>Current Job</h4>
          <div *ngIf="!currentJob">No active job</div>
          <div *ngIf="currentJob">
            <div class="cj-title">{{ currentJob.title }}</div>
            <div class="cj-address">{{ currentJob.address }}</div>
            <div class="progress">
              <div class="bar">
                <div class="fill" [style.width]="currentJob.progress + '%'"></div>
              </div>
              <div class="percent">{{ currentJob.progress }}%</div>
            </div>
          </div>
        </div>

        <div class="card weekly">
          <h4>Weekly Earnings</h4>
          <div class="big-amount">\${{ weekly.total | number:'1.0-0' }}</div>
          <div class="small">+{{ weekly.changePercent | number:'1.0-0' }}% vs last week</div>
        </div>
      </aside>
    </section>
  </main>
</div>
